import{u as H}from"./list-b3616cbd.js";import{g as L,o as q,a as U,b as M,n as $,u as W,r as x,w as j,c as k,p as z,m as J,d as K,e as Q,f as X,h as Y,t as Z,i as I,j as ee,k as p,s as O,l as T,q as w,v,V as te,x as D,y as E,z as N,A as V,B as b}from"./index-781b9eb4.js";import{u as ne}from"./settings-f7dea4a7.js";import{V as oe,a as B,b as re}from"./VCard-2ac6753a.js";function A(e){return L()?(q(e),!0):!1}function C(){const e=new Set,o=r=>{e.delete(r)};return{on:r=>{e.add(r);const s=()=>o(r);return A(s),{off:s}},off:o,trigger:r=>Promise.all(Array.from(e).map(s=>s(r)))}}function R(e){return typeof e=="function"?e():W(e)}const se=typeof window<"u",ie=()=>{};function ae(e,o=!0){U()?M(e):o?e():$(e)}function le(e){var o;const t=R(e);return(o=t==null?void 0:t.$el)!=null?o:t}const F=se?window:void 0;function ce(...e){let o,t,n,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,n,r]=e,o=F):[o,t,n,r]=e,!o)return ie;Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);const s=[],d=()=>{s.forEach(l=>l()),s.length=0},u=(l,i,a,c)=>(l.addEventListener(i,a,c),()=>l.removeEventListener(i,a,c)),y=j(()=>[le(o),R(r)],([l,i])=>{d(),l&&s.push(...t.flatMap(a=>n.map(c=>u(l,a,c,i))))},{immediate:!0,flush:"post"}),m=()=>{y(),d()};return A(m),m}function ue(){const e=x(!1);return U()&&M(()=>{e.value=!0}),e}function de(e){const o=ue();return k(()=>(o.value,!!e()))}function ve(e={}){const{window:o=F}=e,t=de(()=>!!o&&"Notification"in o),n=x(null),r=async()=>{t.value&&"permission"in Notification&&Notification.permission!=="denied"&&await Notification.requestPermission()},{on:s,trigger:d}=C(),{on:u,trigger:y}=C(),{on:m,trigger:l}=C(),{on:i,trigger:a}=C(),c=async h=>{if(!t.value)return;await r();const f=Object.assign({},e,h);return n.value=new Notification(f.title||"",f),n.value.onclick=d,n.value.onshow=y,n.value.onerror=l,n.value.onclose=a,n.value},g=()=>{n.value&&n.value.close(),n.value=null};if(ae(async()=>{t.value&&await r()}),A(g),t.value&&o){const h=o.document;ce(h,"visibilitychange",f=>{f.preventDefault(),h.visibilityState==="visible"&&g()})}return{isSupported:t,notification:n,show:c,close:g,onClick:s,onShow:u,onError:m,onClose:i}}const fe=z({color:String,inset:Boolean,length:[Number,String],thickness:[Number,String],vertical:Boolean,...J(),...K()},"VDivider"),me=Q()({name:"VDivider",props:fe(),setup(e,o){let{attrs:t}=o;const{themeClasses:n}=X(e),{textColorClasses:r,textColorStyles:s}=Y(Z(e,"color")),d=k(()=>{const u={};return e.length&&(u[e.vertical?"maxHeight":"maxWidth"]=I(e.length)),e.thickness&&(u[e.vertical?"borderRightWidth":"borderTopWidth"]=I(e.thickness)),u});return ee(()=>p("hr",{class:[{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},n.value,r.value,e.class],style:[d.value,s.value,e.style],"aria-orientation":!t.role||t.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${t.role||"separator"}`},null)),{}}}),ge={class:"currentext mb-4"},he={class:"currentime"},Te={__name:"Home",setup(e){const o=H(),{items:t,currentItem:n,timeleft:r}=O(o),{countdown:s,setCurrentItem:d,setFinishItem:u}=o,y=ne(),{selectedAlarmFile:m,notify:l}=O(y),i={STOP:0,COUNTING:1,PAUSE:2},a=x(i.STOP);let c=0;const g=()=>{a.value===i.STOP&&t.value.length>0&&d(),n.value.length!==0&&(a.value=i.COUNTING,c=setInterval(()=>{s(),r.value===0&&f()},1e3))},h=()=>{a.value=i.PAUSE,clearInterval(c)},f=()=>{clearInterval(c),a.value=i.STOP;const S=new Audio;if(S.src=m.value,S.play(),l.value){const{show:_}=ve({title:"事項完成!",body:P.value,icon:"https://github.com/wdaweb.png"});_()}u(),t.value.length>0&&g()},P=k(()=>n.value.length>0?n.value:t.value.length>0?"點擊開始!":"沒有事項!"),G=k(()=>{const S=Math.floor(r.value/60).toString().padStart(2,"0"),_=(r.value%60).toString().padStart(2,"0");return S+":"+_});return(S,_)=>(T(),w(te,null,{default:v(()=>[p(re,{class:"text-center"},{default:v(()=>[p(oe,{class:"card pa-md-4 mt-10",color:"tomato",theme:"dark"},{default:v(()=>[p(B,{cols:"12"},{default:v(()=>[D("h1",ge,E(P.value),1),p(me,{thickness:2,class:"border-opacity-75"}),D("h1",he,E(G.value),1)]),_:1}),p(B,{cols:"12"},{default:v(()=>[a.value!==i.COUNTING?(T(),w(N,{key:0,class:"mr-10",variant:"outlined","prepend-icon":"mdi-play",onClick:g},{default:v(()=>[V("開始")]),_:1})):b("",!0),a.value===i.COUNTING?(T(),w(N,{key:1,class:"mr-10",variant:"outlined","prepend-icon":"mdi-pause",onClick:h},{default:v(()=>[V("暫停")]),_:1})):b("",!0),W(n).length>0?(T(),w(N,{key:2,variant:"outlined","prepend-icon":"mdi-skip-next",onClick:f},{default:v(()=>[V("跳過")]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Te as default};
